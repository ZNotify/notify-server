{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/ZNotify/server/master/data/schema.json",
  "type": "object",
  "default": {},
  "title": "ZNotify config schema",
  "required": [
    "senders",
    "user"
  ],
  "properties": {
    "server": {
      "type": "object",
      "default": {},
      "title": "The server config",
      "required": [
        "url"
      ],
      "properties": {
        "port": {
          "type": "integer",
          "default": 14444,
          "title": "The port the server will listen on."
        },
        "host": {
          "type": "string",
          "default": "127.0.0.1",
          "title": "The host the server will listen on."
        },
        "mode": {
          "type": "string",
          "default": "development",
          "title": "The mode the server will run in.",
          "examples": [
            "production"
          ],
          "enum": [
            "production",
            "development",
            "test"
          ]
        },
        "url": {
          "type": "string",
          "default": "http://localhost:14444",
          "title": "The url the server will be available at.",
          "description": "This is used to generate the links in the oauth. Don not include a trailing slash."
        }
      }
    },
    "database": {
      "type": "object",
      "default": {},
      "title": "The database the server will use.",
      "required": [
        "type",
        "dsn"
      ],
      "properties": {
        "type": {
          "type": "string",
          "default": "sqlite",
          "title": "The type of database the server will use.",
          "enum": [
            "sqlite",
            "mysql",
            "pgsql"
          ]
        },
        "dsn": {
          "type": "string",
          "default": "data/notify.db",
          "title": "The destination of the database, usually a file path or a connection string."
        }
      },
      "examples": [
        {
          "type": "sqlite",
          "dsn": "data/notify.db"
        }
      ]
    },
    "senders": {
      "type": "object",
      "default": {},
      "title": "The senders Schema",
      "minProperties": 1,
      "properties": {
        "WebSocket": {
          "type": "null",
          "default": null,
          "title": "The WebSocket Host Sender"
        },
        "FCM": {
          "type": "object",
          "default": {},
          "title": "The Firebase Cloud Messaging Sender",
          "required": [
            "Credential"
          ],
          "properties": {
            "Credential": {
              "type": "string",
              "default": "",
              "title": "The credential from Firebase."
            }
          }
        },
        "WebPush": {
          "type": "object",
          "default": {},
          "title": "The WebPush config schema",
          "required": [
            "VAPIDPrivateKey",
            "VAPIDPublicKey"
          ],
          "properties": {
            "VAPIDPrivateKey": {
              "type": "string",
              "default": "",
              "title": "The VAPID private key."
            },
            "VAPIDPublicKey": {
              "type": "string",
              "default": "",
              "title": "The VAPID public key."
            },
            "Mailto": {
              "type": "string",
              "default": "",
              "title": "The mailto address for the webpush sender."
            }
          }
        },
        "Telegram": {
          "type": "object",
          "default": {},
          "title": "The TelegramHost config schema",
          "required": [
            "BotToken"
          ],
          "properties": {
            "BotToken": {
              "type": "string",
              "default": "",
              "title": "The BotToken",
              "description": "The BotToken from @BotFather"
            }
          }
        }
      }
    },
    "user": {
      "type": "object",
      "default": {},
      "title": "The user config schema",
      "required": [
        "admins",
        "sso"
      ],
      "properties": {
        "admins": {
          "type": "array",
          "default": [],
          "title": "The admins of the server.",
          "description": "The admins of the server, they can do everything. As for now, it is login from GitHub.",
          "minLength": 1
        },
        "sso": {
          "type": "object",
          "default": {},
          "title": "The SSO config schema",
          "required": [
            "github"
          ],
          "properties": {
            "github": {
              "type": "object",
              "title": "The GitHub SSO config schema",
              "required": [
                "client_id",
                "client_secret"
              ],
              "properties": {
                "client_id": {
                  "type": "string",
                  "default": "",
                  "title": "The client id from GitHub."
                },
                "client_secret": {
                  "type": "string",
                  "default": "",
                  "title": "The client secret from GitHub."
                }
              }
            }
          }
        }
      }
    }
  }
}